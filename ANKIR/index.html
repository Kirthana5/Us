<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Happy Anniversary</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">

  <style>
    /* ----------  PASTEL BACKGROUND  ---------- */
    :root {
      --p1:#ffdce0; --p2:#fff3e0; --p3:#e0f7fa;
      --p4:#e8eaf6; --p5:#f3e5f5;
    }
    body{
      margin:0;padding:0;font-family:'Open¬†Sans',sans-serif;
      display:flex;flex-direction:column;align-items:center;
      justify-content:flex-start;min-height:100vh;overflow:hidden;
      background:linear-gradient(45deg,var(--p1),var(--p2));
      transition:background 2s ease-in-out;
    }
    body.festival{animation:pastel 12s infinite;}
    @keyframes pastel{
      0%{background:linear-gradient(45deg,var(--p1),var(--p2))}
      25%{background:linear-gradient(45deg,var(--p3),var(--p4))}
      50%{background:linear-gradient(45deg,var(--p2),var(--p5))}
      75%{background:linear-gradient(45deg,var(--p4),var(--p1))}
      100%{background:linear-gradient(45deg,var(--p1),var(--p2))}
    }

    /* ----------  CONTAINER & TITLE  ---------- */
    .container{text-align:center;margin-top:40px;position:relative;z-index:2;}
    .title{
      font-size:2rem;color:#b8004c;font-weight:bold;
      height:60px;margin-bottom:30px;transition:.3s;
    }
    .title.animated{
      font-family:'Great¬†Vibes',cursive;font-size:3rem;color:#c2185b;
      text-shadow:0 0 10px #f8bbd0,0 0 20px #f48fb1;
      white-space:nowrap;overflow:hidden;border-right:3px solid rgba(255,255,255,.75);
      width:0;animation:typing 3s steps(40,end) forwards,blink .75s step-end infinite;
    }
    @keyframes typing{from{width:0}to{width:100%}}
    @keyframes blink{50%{border-color:transparent}}

    /* ----------  IMAGES  ---------- */
    .hand-container{position:relative;width:100%;max-width:320px;margin:0 auto;
      cursor:pointer;box-shadow:0 10px 25px rgba(0,0,0,.2);
      border-radius:20px;overflow:hidden;}
    #ring,#hands{width:100%;display:block;transition:opacity 1s ease;}
    #hands{position:absolute;top:0;left:0;display:none;opacity:0;z-index:2;}

    /* ----------  MESSAGE  ---------- */
    #message{
      margin-top:20px;background:rgba(255,255,255,.9);
      padding:12px 24px;border-radius:30px;font-size:1.1rem;font-weight:bold;
      display:none;animation:fadeUp 1s ease forwards,colorPulse 6s infinite;
      box-shadow:0 0 10px rgba(255,105,135,.4);
    }
    @keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
    @keyframes colorPulse{0%{color:#d81b60}50%{color:#6a1b9a}100%{color:#d81b60}}

    /* ----------  HEARTS  ---------- */
    .hearts{position:absolute;top:0;left:0;width:100%;height:100%;
      pointer-events:none;z-index:0;overflow:hidden;}
    .heart{
      position:absolute;width:20px;height:20px;background:#ff90b3;
      transform:rotate(45deg);animation:float 10s linear infinite;
    }
    .heart::before,.heart::after{
      content:"";position:absolute;width:20px;height:20px;background:#ff90b3;border-radius:50%;
    }
    .heart::before{top:-10px;left:0}.heart::after{top:0;left:-10px}
    @keyframes float{
      0%{bottom:-50px;opacity:0}10%{opacity:1}
      100%{bottom:100%;opacity:0;transform:rotate(720deg)}
    }

    /* ----------  FIREWORKS CANVAS  ---------- */
    canvas#fireworks{position:fixed;top:0;left:0;pointer-events:none;z-index:1;}
  </style>
</head>

<body>
  <!-- FIREWORKS CANVAS -->
  <canvas id="fireworks"></canvas>

  <!-- MAIN CONTENT -->
  <div class="container">
    <h1 class="title" id="titleText">üíç Touch the Ring üíç</h1>

    <div class="hand-container" onclick="startCelebration()">
      <img src="images/ring.jpg" alt="Ring" id="ring" />
      <img src="images/couple_hands.jpg" alt="Couple Hands" id="hands" />
    </div>

    <div id="message">üíñüêº To my Smurfiee from your Shortiee üêºüíñ</div>

    <!-- AUDIO (starts on click) -->
    <audio id="bg-music" loop>
      <source src="audio/dandelions.mp3" type="audio/mp3" />
      Your browser does not support the audio element.
    </audio>
  </div>

  <!-- HEARTS CONTAINER -->
  <div class="hearts" id="heartContainer"></div>

  <!-- ----------  SCRIPT  ---------- -->
  <script>
    /* -------- CLICK HANDLER -------- */
    function startCelebration(){
      // Pastel cycling background
      document.body.classList.add("festival");

      // Swap title & animate
      const title=document.getElementById("titleText");
      title.classList.remove("animated");
      title.textContent="üíñ Happy 2nd Anniversary üíñ";
      void title.offsetWidth; // restart animation
      title.classList.add("animated");

      // Show hands & message
      const hands=document.getElementById("hands");
      const message=document.getElementById("message");
      hands.style.display="block";
      setTimeout(()=>{hands.style.opacity=1;message.style.display="block";},100);

      // Play music
      document.getElementById("bg-music").play().catch(()=>{}); // ignore autoplay errors

      // Launch hearts & fireworks
      launchHearts();
      launchFireworks();
    }

    /* -------- HEARTS -------- */
    function launchHearts(){
      const container=document.getElementById("heartContainer");
      for(let i=0;i<50;i++){
        const h=document.createElement("div");
        h.className="heart";
        h.style.left=`${Math.random()*100}%`;
        h.style.animationDelay=`${Math.random()*10}s`;
        container.appendChild(h);
      }
    }

    /* -------- FIREWORKS -------- */
    function launchFireworks(){
      const canvas=document.getElementById("fireworks");
      const ctx=canvas.getContext("2d");
      canvas.width=innerWidth;
      canvas.height=innerHeight;

      const colors=['#f8bbd0','#f48fb1','#ce93d8','#81d4fa','#ffccbc','#ffe082'];
      let particles=[];

      function burst(){
        const x=Math.random()*canvas.width;
        const y=Math.random()*canvas.height/2;
        for(let i=0;i<40;i++){
          particles.push({
            x,y,
            angle:Math.random()*Math.PI*2,
            speed:Math.random()*4+2,
            r:Math.random()*2+1,
            color:colors[Math.floor(Math.random()*colors.length)],
            life:70
          });
        }
      }

      function update(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        particles.forEach(p=>{
          p.x+=Math.cos(p.angle)*p.speed;
          p.y+=Math.sin(p.angle)*p.speed;
          p.life--;
        });
        particles=particles.filter(p=>p.life>0);
        particles.forEach(p=>{
          ctx.beginPath();
          ctx.arc(p.x,p.y,p.r,0,2*Math.PI);
          ctx.fillStyle=p.color;
          ctx.fill();
        });
      }

      // initial bursts + interval
      for(let i=0;i<10;i++) setTimeout(burst,i*400);
      setInterval(burst,1000);
      (function animate(){update();requestAnimationFrame(animate);}());
    }
  </script>
</body>
</html>
